trigger:
  batch: true
  branches:
    include:
      - dev
  paths:
    exclude:
      - azure-pipelines.yml
      - pom.xml

pool:
  vmImage: 'ubuntu-latest'

variables:
  - group: Build-Variable-Group
  - name: MAVEN_CACHE_FOLDER
    value: $(Pipeline.Workspace)/.m2/repository
  - name: MAVEN_OPTS
    value: '-Dmaven.repo.local=$(MAVEN_CACHE_FOLDER)'

steps:
  - task: CacheBeta@0
    inputs:
      key: $(Build.SourcesDirectory)/pom.xml
      path: $(MAVEN_CACHE_FOLDER)
    displayName: 'Cache Maven Local Repository'
